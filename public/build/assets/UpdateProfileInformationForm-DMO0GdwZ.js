import{T as j,b as v,r as A,c as V,o as d,w as n,a,d as _,e as p,u as s,n as h,f as c,g as o,l as b,A as g,B as E,k as y,t as D,j as F,N as R}from"./app-BXivYfyE.js";import{_ as T}from"./FormSection-DqOM67XE.js";import{_ as B}from"./InputError-HPGJqYtO.js";import{_ as k}from"./InputLabel-CKo98iOF.js";import{_ as C}from"./TextInput-DHBBKmHe.js";const q={key:0,class:"mb-3"},z={class:"mb-2"},L={class:"mb-2"},M=["src","alt"],O={class:"text-danger mt-2"},Y={class:"mb-3"},G={class:"mb-3"},H={key:0},J={class:"text-sm mt-2 text-muted"},K={class:"alert alert-success text-success"},Q={key:0,class:"alert alert-info mt-3"},se={__name:"UpdateProfileInformationForm",props:{user:Object},setup(i){const P=i,t=j({_method:"PUT",name:P.user.name,email:P.user.email,photo:null}),w=v(null),u=v(null),r=v(null),N=()=>{r.value&&(t.photo=r.value.files[0]),t.post(route("user-profile-information.update"),{errorBag:"updateProfileInformation",preserveScroll:!0,onSuccess:()=>S()})},I=()=>{w.value=!0},x=()=>{r.value.click()},U=()=>{const l=r.value.files[0];if(!l)return;const e=new FileReader;e.onload=m=>{u.value=m.target.result},e.readAsDataURL(l)},$=()=>{R.delete(route("current-user-photo.destroy"),{preserveScroll:!0,onSuccess:()=>{u.value=null,S()}})},S=()=>{var l;(l=r.value)!=null&&l.value&&(r.value.value=null)};return(l,e)=>{const m=A("BButton");return d(),V(T,{onSubmitted:N,title:"Profile Information",description:"Update your account's profile information and email address."},{form:n(()=>[l.$page.props.jetstream.managesProfilePhotos?(d(),_("div",q,[o("div",z,[o("input",{ref_key:"photoInput",ref:r,type:"file",class:"d-none form-control",onChange:U},null,544),a(k,{for:"photo",value:"Photo"})]),o("div",L,[b(o("div",null,[o("img",{src:i.user.profile_photo_url,alt:i.user.name,class:"rounded-circle",width:"100"},null,8,M)],512),[[g,!u.value]]),b(o("div",null,[o("span",{class:"d-block rounded-circle w-25",style:E("background-image: url('"+u.value+"');")},null,4)],512),[[g,u.value]])]),a(m,{variant:"primary",class:"me-2 btn-sm",type:"button",onClick:y(x,["prevent"])},{default:n(()=>e[2]||(e[2]=[c("Select A New Photo")])),_:1,__:[2]}),i.user.profile_photo_path?(d(),V(m,{key:0,variant:"danger",type:"button",class:"btn-sm",onClick:y($,["prevent"])},{default:n(()=>e[3]||(e[3]=[c("Remove Photo")])),_:1,__:[3]})):p("",!0),o("div",O,[o("span",null,D(s(t).errors.photo),1)])])):p("",!0),o("div",Y,[a(k,{for:"name",value:"Name"}),a(C,{id:"name",modelValue:s(t).name,"onUpdate:modelValue":e[0]||(e[0]=f=>s(t).name=f),type:"text",required:"",autocomplete:"name",class:h({"is-invalid":s(t).errors.name})},null,8,["modelValue","class"]),a(B,{message:s(t).errors.name,class:"mt-2"},null,8,["message"])]),o("div",G,[a(k,{for:"email",value:"Email"}),a(C,{id:"email",modelValue:s(t).email,"onUpdate:modelValue":e[1]||(e[1]=f=>s(t).email=f),type:"email",required:"",autocomplete:"username",class:h({"is-invalid":s(t).errors.email})},null,8,["modelValue","class"]),a(B,{message:s(t).errors.email,class:"mt-2"},null,8,["message"]),l.$page.props.jetstream.hasEmailVerification&&i.user.email_verified_at===null?(d(),_("div",H,[o("p",J,[e[5]||(e[5]=c(" Your email address is unverified. ")),a(s(F),{href:l.route("verification.send"),method:"post",as:"button",class:"btn btn-sm btn-warning",onClick:y(I,["prevent"])},{default:n(()=>e[4]||(e[4]=[c(" Click here to re-send the verification email. ")])),_:1,__:[4]},8,["href"])]),b(o("div",K," A new verification link has been sent to your email address. ",512),[[g,w.value]])])):p("",!0)])]),actions:n(()=>[a(m,{variant:"success w-100",type:"submit",class:h({"opacity-25":s(t).processing}),disabled:s(t).processing},{default:n(()=>e[6]||(e[6]=[c("Save")])),_:1,__:[6]},8,["class","disabled"]),s(t).recentlySuccessful?(d(),_("p",Q,"Profile Saved.")):p("",!0)]),_:1})}}};export{se as default};
