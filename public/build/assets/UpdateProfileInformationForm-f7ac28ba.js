import{T as j,b as v,r as A,c as C,w as n,o as m,d as h,f as t,a as s,k as _,z as b,A as E,h as d,j as k,e as p,t as z,u as o,n as y,i as D,O as F}from"./app-bd842468.js";import{_ as O}from"./FormSection-02d70dbf.js";import{_ as V}from"./InputError-4c0a5692.js";import{_ as g}from"./InputLabel-d337ebdf.js";import{_ as B}from"./TextInput-e31c3593.js";const R={key:0,class:"mb-3"},T={class:"mb-2"},q={class:"mb-2"},L=["src","alt"],M={class:"text-danger mt-2"},Y={class:"mb-3"},G={class:"mb-3"},H={key:0},J={class:"text-sm mt-2 text-muted"},K={class:"alert alert-success text-success"},Q={key:0,class:"alert alert-info mt-3"},oe={__name:"UpdateProfileInformationForm",props:{user:Object},setup(i){const P=i,e=j({_method:"PUT",name:P.user.name,email:P.user.email,photo:null}),w=v(null),u=v(null),l=v(null),I=()=>{l.value&&(e.photo=l.value.files[0]),e.post(route("user-profile-information.update"),{errorBag:"updateProfileInformation",preserveScroll:!0,onSuccess:()=>S()})},N=()=>{w.value=!0},x=()=>{l.value.click()},U=()=>{const a=l.value.files[0];if(!a)return;const r=new FileReader;r.onload=c=>{u.value=c.target.result},r.readAsDataURL(a)},$=()=>{F.delete(route("current-user-photo.destroy"),{preserveScroll:!0,onSuccess:()=>{u.value=null,S()}})},S=()=>{var a;(a=l.value)!=null&&a.value&&(l.value.value=null)};return(a,r)=>{const c=A("BButton");return m(),C(O,{onSubmitted:I,title:"Profile Information",description:"Update your account's profile information and email address."},{form:n(()=>[a.$page.props.jetstream.managesProfilePhotos?(m(),h("div",R,[t("div",T,[t("input",{ref_key:"photoInput",ref:l,type:"file",class:"d-none form-control",onChange:U},null,544),s(g,{for:"photo",value:"Photo"})]),t("div",q,[_(t("div",null,[t("img",{src:i.user.profile_photo_url,alt:i.user.name,class:"rounded-circle",width:"100"},null,8,L)],512),[[b,!u.value]]),_(t("div",null,[t("span",{class:"d-block rounded-circle w-25",style:E("background-image: url('"+u.value+"');")},null,4)],512),[[b,u.value]])]),s(c,{variant:"primary",class:"me-2 btn-sm",type:"button",onClick:k(x,["prevent"])},{default:n(()=>[d("Select A New Photo")]),_:1},8,["onClick"]),i.user.profile_photo_path?(m(),C(c,{key:0,variant:"danger",type:"button",class:"btn-sm",onClick:k($,["prevent"])},{default:n(()=>[d("Remove Photo")]),_:1},8,["onClick"])):p("",!0),t("div",M,[t("span",null,z(o(e).errors.photo),1)])])):p("",!0),t("div",Y,[s(g,{for:"name",value:"Name"}),s(B,{id:"name",modelValue:o(e).name,"onUpdate:modelValue":r[0]||(r[0]=f=>o(e).name=f),type:"text",required:"",autocomplete:"name",class:y({"is-invalid":o(e).errors.name})},null,8,["modelValue","class"]),s(V,{message:o(e).errors.name,class:"mt-2"},null,8,["message"])]),t("div",G,[s(g,{for:"email",value:"Email"}),s(B,{id:"email",modelValue:o(e).email,"onUpdate:modelValue":r[1]||(r[1]=f=>o(e).email=f),type:"email",required:"",autocomplete:"username",class:y({"is-invalid":o(e).errors.email})},null,8,["modelValue","class"]),s(V,{message:o(e).errors.email,class:"mt-2"},null,8,["message"]),a.$page.props.jetstream.hasEmailVerification&&i.user.email_verified_at===null?(m(),h("div",H,[t("p",J,[d(" Your email address is unverified. "),s(o(D),{href:a.route("verification.send"),method:"post",as:"button",class:"btn btn-sm btn-warning",onClick:k(N,["prevent"])},{default:n(()=>[d(" Click here to re-send the verification email. ")]),_:1},8,["href","onClick"])]),_(t("div",K," A new verification link has been sent to your email address. ",512),[[b,w.value]])])):p("",!0)])]),actions:n(()=>[s(c,{variant:"primary w-100",type:"submit",class:y({"opacity-25":o(e).processing}),disabled:o(e).processing},{default:n(()=>[d("Save")]),_:1},8,["class","disabled"]),o(e).recentlySuccessful?(m(),h("p",Q,"Profile Saved.")):p("",!0)]),_:1})}}};export{oe as default};
