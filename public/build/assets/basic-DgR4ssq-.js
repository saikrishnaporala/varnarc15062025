import{z as h,J as C,Q as v,c as _,i as P,S as j,N as z,U as x,V as B,G as g,W as S,R as L,A as Z,M as k,g as M,a as I,m as E}from"./AnimatedTheme-DntLrVva.js";import{_ as A}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{C as W}from"./ColorSet-sxwWxsfA.js";import{M as R,B as Y}from"./MapPointSeries-DVjfmaOu.js";import{C as X}from"./Circle-BtEfBpkM.js";import{B as b}from"./Button-BzXSjkNE.js";import{d as $,o as G}from"./app-BEcxhe1F.js";class p extends h{constructor(){super(...arguments),Object.defineProperty(this,"_za",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_txa",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_tya",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_movePoints",{enumerable:!0,configurable:!0,writable:!0,value:{}}),Object.defineProperty(this,"_downScale",{enumerable:!0,configurable:!0,writable:!0,value:1}),Object.defineProperty(this,"_downX",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_downY",{enumerable:!0,configurable:!0,writable:!0,value:0}),Object.defineProperty(this,"_pinchDP",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"contents",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(h.new(this._root,{width:v,height:v,x:0,y:0,draggable:!0,background:C.new(this._root,{fill:_(16777215),fillOpacity:0})}))}),Object.defineProperty(this,"_wheelDp",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_afterNew(){super._afterNew();const t=this.contents.events;this._disposers.push(t.on("pointerdown",e=>{this._handleThisDown(e)})),this._disposers.push(t.on("globalpointerup",e=>{this._handleThisUp(e)})),this._disposers.push(t.on("globalpointermove",e=>{this._handleThisMove(e)}));const i=this.contents.get("background");i&&(i.adapters.add("width",e=>Number(e)*20),i.adapters.add("height",e=>Number(e)*20),i.adapters.add("x",e=>Number(e)-i.width()/2),i.adapters.add("y",e=>Number(e)-i.height()/2));const o=this.contents;o.adapters.add("x",e=>{const s=o.get("scale",1);if(P(e)&&s>=1){let n=this.get("maxPanOut",.4),r=o.width();e=Math.min(r*n,e),e=Math.max(this.width()-r*s*(1+n),e)}return e}),o.adapters.add("y",e=>{const s=o.get("scale",1);if(P(e)&&s>=1){let n=this.get("maxPanOut",.4),r=o.height();e=Math.min(r*n,e),e=Math.max(this.height()-r*s*(1+n),e)}return e})}_prepareChildren(){super._prepareChildren(),this.isDirty("wheelable")&&this._handleSetWheel(),this.contents._display.cancelTouch=this.get("pinchZoom",!1)}_handleSetWheel(){this.get("wheelable")?(this._wheelDp&&this._wheelDp.dispose(),this._wheelDp=this.events.on("wheel",t=>{const i=t.originalEvent;if(j(i,this))i.preventDefault();else return;const o=this.toLocal(t.point);this._handleWheelZoom(i.deltaY,o)}),this._disposers.push(this._wheelDp)):this._wheelDp&&this._wheelDp.dispose()}_handleWheelZoom(t,i){let o=this.get("zoomStep",2),e=this.contents.get("scale",1),s=e;t>0?s=e/o:t<0&&(s=e*o),s!=e&&this.zoomToPoint(i,s)}zoomToPoint(t,i){i&&(i=z(i,this.get("minZoomLevel",1),this.get("maxZoomLevel",32)));const o=this.contents.get("scale",1);let e=t.x,s=t.y,n=e,r=s;const c=this.contents;let w=c.x(),l=c.y(),d=n-(e-w)/o*i,m=r-(s-l)/o*i;return this._animateTo(d,m,i),this._za}zoomIn(){return this.zoomToPoint({x:this.width()/2,y:this.height()/2},this.contents.get("scale",1)*this.get("zoomStep",2))}zoomOut(){return this.zoomToPoint({x:this.width()/2,y:this.height()/2},this.contents.get("scale",1)/this.get("zoomStep",2))}goHome(){return this._animateTo(0,0,1)}_animateTo(t,i,o){const e=this.get("animationDuration",0),s=this.get("animationEasing"),n=this.contents;this._txa=n.animate({key:"x",to:t,duration:e,easing:s}),this._tya=n.animate({key:"y",to:i,duration:e,easing:s}),this._za=n.animate({key:"scale",to:o,duration:e,easing:s})}_handleThisUp(t){this._downPoints={}}_handleThisDown(t){const i=this.contents;this._downScale=i.get("scale",1);const o=i._downPoints;let e=x(o).length;if(e==1){let s=o[1];s||(s=o[0]),s&&s.x==t.point.x&&s.y==t.point.y&&(e=0)}if(e>0){this._downX=i.x(),this._downY=i.y();const s=i._getDownPointId();if(s){let n=this._movePoints[s];n&&(i._downPoints[s]=n)}}}_handleThisMove(t){const o=t.originalEvent.pointerId;if(this.get("pinchZoom")&&o&&(this._movePoints[o]=t.point,x(this.contents._downPoints).length>1)){this._handlePinch();return}}_handlePinch(){let t=0,i=[],o=[];if(B(this.contents._downPoints,(e,s)=>{i[t]=s;let n=this._movePoints[e];n&&(o[t]=n),t++}),i.length>1&&o.length>1){this.contents._isDragging=!1;let e=i[0],s=i[1],n=o[0],r=o[1];if(e&&s&&n&&r){e=this.toLocal(e),s=this.toLocal(s),n=this.toLocal(n),r=this.toLocal(r);let c=Math.hypot(s.x-e.x,s.y-e.y),l=Math.hypot(r.x-n.x,r.y-n.y)/c*this._downScale,d={x:n.x+(r.x-n.x)/2,y:n.y+(r.y-n.y)/2},m={x:e.x+(s.x-e.x)/2,y:e.y+(s.y-e.y)/2},O=this._downX||0,D=this._downY||0,y=this._downScale,T=d.x-(-O+m.x)/y*l,N=d.y-(-D+m.y)/y*l;this.contents.setAll({x:T,y:N,scale:l})}}}}Object.defineProperty(p,"className",{enumerable:!0,configurable:!0,writable:!0,value:"ZoomableContainer"});Object.defineProperty(p,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:h.classNames.concat([p.className])});class u extends h{constructor(){super(...arguments),Object.defineProperty(this,"homeButton",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(b.new(this._root,{width:35,height:35,themeTags:["home"]}))}),Object.defineProperty(this,"plusButton",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(b.new(this._root,{width:35,height:35,themeTags:["plus"]}))}),Object.defineProperty(this,"minusButton",{enumerable:!0,configurable:!0,writable:!0,value:this.children.push(b.new(this._root,{width:35,height:35,themeTags:["minus"]}))}),Object.defineProperty(this,"_disposer",{enumerable:!0,configurable:!0,writable:!0,value:void 0}),Object.defineProperty(this,"_targetDisposer",{enumerable:!0,configurable:!0,writable:!0,value:void 0})}_afterNew(){super._afterNew(),this.set("position","absolute"),this.set("layout",this._root.verticalLayout),this.addTag("zoomtools"),this.plusButton.setAll({icon:g.new(this._root,{themeTags:["icon"]}),layout:void 0}),this.minusButton.setAll({icon:g.new(this._root,{themeTags:["icon"]}),layout:void 0}),this.homeButton.setAll({icon:g.new(this._root,{themeTags:["icon"]}),layout:void 0})}_prepareChildren(){if(super._prepareChildren(),this.isDirty("target")){const t=this.get("target"),i=this._prevSettings.target;t&&(t instanceof p&&(this._targetDisposer=this.addDisposer(t.contents.on("scale",o=>{o==t.get("minZoomLevel")?this.minusButton.set("disabled",!0):this.minusButton.set("disabled",!1),o==t.get("maxZoomLevel")?this.plusButton.set("disabled",!0):this.plusButton.set("disabled",!1)})),this.root.events.once("frameended",()=>{t.get("scale")==t.get("minZoomLevel")&&this.minusButton.set("disabled",!0)})),this._disposer=new S([this.plusButton.events.on("click",()=>{t.zoomIn()}),this.minusButton.events.on("click",()=>{t.zoomOut()}),this.homeButton.events.on("click",()=>{t.goHome()})])),i&&(this._disposer&&this._disposer.dispose(),this._targetDisposer&&this._targetDisposer.dispose())}}}Object.defineProperty(u,"className",{enumerable:!0,configurable:!0,writable:!0,value:"ZoomTools"});Object.defineProperty(u,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:h.classNames.concat([u.className])});class f extends u{_afterNew(){super._afterNew(),this.addTag("zoomtools")}_prepareChildren(){super._prepareChildren(),this.isPrivateDirty("chart")&&this.set("target",this.getPrivate("chart"))}}Object.defineProperty(f,"className",{enumerable:!0,configurable:!0,writable:!0,value:"ZoomControl"});Object.defineProperty(f,"classNames",{enumerable:!0,configurable:!0,writable:!0,value:u.classNames.concat([f.className])});const U={methods:{basicChart(){const a=L.new("basicChartDiv");a.setThemes([Z.new(a)]);let t=a.container.children.push(k.new(a,{panX:"none",panY:"none",opacity:1,projection:M()}));t.series.push(I.new(a,{geoJSON:E,exclude:["AQ"],fill:_("rgb(222, 226, 232)"),stroke:_("#fff")}));let i=W.new(a,{});var o=t.series.push(R.new(a,{}));o.bullets.push(function(){return Y.new(a,{sprite:X.new(a,{radius:4,stroke:i.next(),strokeWidth:6,strokeOpacity:.5,fill:i.next(),fillOpacity:1,tooltipText:"{title}",cursorOverStyle:"pointer"})})}),o.pushDataItem({title:"Greenland",latitude:71.7069,longitude:-42.6043}),o.pushDataItem({title:"Russia",latitude:61.524,longitude:105.3188}),o.pushDataItem({title:"Canada",latitude:56.1304,longitude:-106.3468}),t.set("zoomControl",f.new(a,{}))}},mounted(){this.basicChart()}},H={id:"basicChartDiv",style:{height:"420px"}};function J(a,t,i,o,e,s){return G(),$("div",H)}const ie=A(U,[["render",J]]);export{ie as default};
